
############################################
# String literals
str_null_ref: "Runtime Error: Null pointer dereference!"
str_array_access: "Runtime Error: Array index out of bounds!"
str_size: "Runtime Error: Array allocation with negative array size!"
str_zero: "Runtime Error: Division by zero!"
str2: "MooooOoOo!"
str1: "Miao!"
str3: "Old McDonald"
str5: "(After sunset)"
str4: "(before sunrise)"
############################################

############################################
# Dispatch vectors
_DV_Farmer: [_Farmer_milkCow,_Farmer_feedCats]
_DV_Cow: [_Cow_squeezeMilk,_Cow_sleep,_Cow_hasMilk]
_DV_Farm: [_Farm_test]
############################################

############################################
# Runtime Checks
__checkNullRef:
Return Rdummy
__checkArrayAccess:
Return Rdummy
__checkSize:
Return Rdummy
__checkZero:
Return Rdummy
############################################



####Farmer.milkCow####
_Farmer_milkCow:
_while_test_label0: 
#virtual call to hasMilk's location:
Move p_0,R1
StaticCall __checkNullRef(a=p_0),Rdummy
VirtualCall R1.2(),R2
# line number: 13
Compare 0,R2
JumpTrue _while_end_label1
Move this,R3
#virtual call to squeezeMilk's location:
Move p_0,R4
StaticCall __checkNullRef(a=p_0),Rdummy
VirtualCall R4.0(),R5
MoveField R3.3,R6
Add R5,R6
MoveField R6,R3.3
Jump _while_test_label0
_while_end_label1: 
Return Rdummy

####Farmer.feedCats####
_Farmer_feedCats:
Move 0,v_3_i
_while_test_label2: 
Move this,R8
Move v_3_i,R9
MoveField R8.2,R10
Compare R10,R9
JumpL _true_label4
Move 0,R9
Jump _end_label4
_true_label4:
Move 1,R9
_end_label4:
MoveField R8.3,R12
Compare 0,R12
JumpG _true_label5
Move 0,R12
Jump _end_label5
_true_label5:
Move 1,R12
_end_label5:
Move R9,R14
Library __stringCat(R9,R12),R15
# line number: 20
Compare 0,R15
JumpTrue _while_end_label3
Library __println(str1),Rdummy
MoveField R8.3,R16
Sub 1,R16
MoveField R16,R8.3
Move v_3_i,R18
Add 1,R18
Move R18,v_3_i
Jump _while_test_label2
_while_end_label3: 
Return Rdummy

####Cow.hasMilk####
_Cow_hasMilk:
Move this,R20
MoveField R20.1,R21
Compare 0,R21
JumpG _true_label8
Move 0,R21
Jump _end_label8
_true_label8:
Move 1,R21
_end_label8:
# line number: 33
Compare 0,R21
JumpTrue _else_label6
Return 0
Jump _end_if_label7
_else_label6: 
Return 0
_end_if_label7: 

####Cow.squeezeMilk####
_Cow_squeezeMilk:
#virtual call to hasMilk's location:
Move this,R23
VirtualCall R23.2(),R24
# line number: 40
Compare 0,R24
JumpTrue _end_if_label10
MoveField R23.1,R25
Sub 1,R25
MoveField R25,R23.1
Library __println(str2),Rdummy
Return R23.1
Jump _end_if_label10
_end_if_label10: 
Return 0

####Cow.sleep####
_Cow_sleep:
Move this,R27
MoveField R27.1,R28
Add 10,R28
MoveField R28,R27.1
Return Rdummy

####Farm.test####
_Farm_test:
Move 10,R31
StaticCall __checkSize(n=R31),Rdummy
Move R31,R32
Mul 4,R32
Library __allocateArray(R32),R33
_array_init_start11: 
Dec R31
Compare 0,R31
JumpL _array_init_end12
MoveArray 0,R33[R31]
JumpL _array_init_start11
_array_init_end12: 
Move this,R34
MoveField R33,R34.2
Move 0,v_7_i
_while_test_label13: 
StaticCall __checkNullRef(a=R34),Rdummy
ArrayLength R34,R35
Move v_7_i,R36
Compare R35,R36
JumpL _true_label15
Move 0,R36
Jump _end_label15
_true_label15:
Move 1,R36
_end_label15:
# line number: 69
Compare 0,R36
JumpTrue _while_end_label14
Library __allocateObject(8),R38
MoveField _DV_Cow,R38.0
MoveField R34.2,R39
StaticCall __checkNullRef(a=R34),Rdummy
Move v_7_i,R40
StaticCall __checkArrayAccess(a=R39,i=R40),Rdummy
MoveArray R38,R39[R40]
Move v_7_i,R41
Mod 2,R41
Move R41,R43
Mul 10,R43
MoveField R34.2,R45
StaticCall __checkNullRef(a=R34),Rdummy
Move v_7_i,R46
StaticCall __checkArrayAccess(a=R45,i=R46),Rdummy
StaticCall __checkNullRef(a=R45[R46]),Rdummy
MoveField R43,R45[R46].1
Move v_7_i,R47
Add 1,R47
Move R47,v_7_i
Jump _while_test_label13
_while_end_label14: 
Library __allocateObject(16),R49
MoveField _DV_Farmer,R49.0
MoveField R49,R34.1
MoveField R34.1,R50
StaticCall __checkNullRef(a=R50),Rdummy
Move str3,R51
MoveField R51,R50.1
MoveField R34.1,R52
StaticCall __checkNullRef(a=R52),Rdummy
Move 0,R53
MoveField R53,R52.3
MoveField R34.1,R54
StaticCall __checkNullRef(a=R54),Rdummy
Move 20,R55
MoveField R55,R54.2
Library __println(str4),Rdummy
Move 0,v_7_i
_while_test_label16: 
StaticCall __checkNullRef(a=R34),Rdummy
ArrayLength R34,R56
Move v_7_i,R57
Compare R56,R57
JumpL _true_label18
Move 0,R57
Jump _end_label18
_true_label18:
Move 1,R57
_end_label18:
# line number: 84
Compare 0,R57
JumpTrue _while_end_label17
#virtual call to milkCow's location:
StaticCall __checkNullRef(a=R34),Rdummy
MoveField R34.2,R59
StaticCall __checkNullRef(a=R34),Rdummy
Move v_7_i,R60
StaticCall __checkArrayAccess(a=R59,i=R60),Rdummy
VirtualCall R34.1.0(p_0=R59[R60]),Rdummy
Move v_7_i,R61
Add 1,R61
Move R61,v_7_i
Jump _while_test_label16
_while_end_label17: 
Library __println(str5),Rdummy
Move 0,v_7_i
_while_test_label19: 
StaticCall __checkNullRef(a=R34),Rdummy
ArrayLength R34,R63
Move v_7_i,R64
Compare R63,R64
JumpL _true_label21
Move 0,R64
Jump _end_label21
_true_label21:
Move 1,R64
_end_label21:
# line number: 90
Compare 0,R64
JumpTrue _while_end_label20
#virtual call to sleep's location:
MoveField R34.2,R66
StaticCall __checkNullRef(a=R34),Rdummy
Move v_7_i,R67
StaticCall __checkArrayAccess(a=R66,i=R67),Rdummy
MoveArray R66[R67],R68
StaticCall __checkNullRef(a=R66[R67]),Rdummy
VirtualCall R68.1(),Rdummy
Move v_7_i,R69
Add 1,R69
Move R69,v_7_i
Jump _while_test_label19
_while_end_label20: 
#virtual call to feedCats's location:
StaticCall __checkNullRef(a=R34),Rdummy
VirtualCall R34.1.1(),Rdummy
Return Rdummy

####main in Farm####
_ic_main:
#virtual call to test's location:
Library __allocateObject(12),R30
MoveField _DV_Farm,R30.0
StaticCall __checkNullRef(a=R30),Rdummy
VirtualCall R30.0(),Rdummy

