package lir;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

public class Environment {
		
	//represents the index of str label
	private int currentStringLabelIndex = 0;
	
	//represents the next available string to use.
	protected int currentRegister = 0;
	
	//represents the map from string labels to the actual string
	protected Map<String,String> stringToLabelMap = new HashMap<>();
	
	//represents the core Lir code
	protected StringBuilder lirCode = new StringBuilder();
	
	//represents the virtual table map
	protected Map<String,ArrayList<String>> dispacherTables = new HashMap<>();
	
	protected int incrementStringLabelIndex(){ return ++currentStringLabelIndex;};
	
	public void incrementRegistr(){ ++currentRegister;};
	
	public void decrementRegistr(){ --currentRegister;};
	
	public void addStringLabel(String str){
		stringToLabelMap.put(str, "str"+incrementStringLabelIndex());
	}
	
	public void addVirtualTable(String className, ArrayList<String> virtualTable){
		dispacherTables.put(className, virtualTable);
	}
	
	public void addVirtualMethod(String className, String method){
		if(dispacherTables.containsKey(className)){
			dispacherTables.get(className).add(method);
		} else{
			dispacherTables.put(className,new ArrayList<String>{ method} );
		}
	}
	
	
	
	
	
	

}
